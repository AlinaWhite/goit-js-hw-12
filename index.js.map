{"version":3,"file":"index.js","sources":["../src/js/render.functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const galleryCard = imgEl => {\n    return `\n    <a class=\"gallery-link\" href=\"${imgEl.largeImageURL}\">    \n                   <div class=\"gallery-item\">\n                       <img class=\"gallery-item__image\" src=\"${imgEl.webformatURL}\" alt=\"${imgEl.tags}\" loading=\"lazy\" />\n                       <div class=\"info\">\n                           <p class=\"info__item\">\n                           <b class=\"info__item-name\">Likes</b>\n                           ${imgEl.likes}\n                           </p>\n                           <p class=\"info__item\">\n                           <b class=\"info__item-name\">Views</b>\n                           ${imgEl.views}\n                           </p>\n                           <p class=\"info__item\">\n                           <b class=\"info__item-name\">Comments</b>\n                           ${imgEl.comments}\n                           </p>\n                           <p class=\"info__item\">\n                           <b class=\"info__item-name\">Downloads</b>\n                           ${imgEl.downloads}\n                           </p>\n                       </div>\n                   </div>\n               </a>\n    `\n   }\n\n\n    ","import axiox from \"axios\";\n\naxiox.defaults.baseURL = 'https://pixabay.com/api/';\n\n\nexport const fetchImages = (searchValueImput, nextPageNumber) => {\n    const urlParams = {\n        params:{\n        q: searchValueImput,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        per_page: 16,\n        page: nextPageNumber,\n        safesearch: true,\n        key: '46938898-491ce0dea342e81df1da49dcf',}\n    };\n\n\nreturn axiox.get('',urlParams);\n};","import { galleryCard } from \"./js/render.functions\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport SimpleLightbox from \"simplelightbox\";\nimport iziToast from \"izitoast\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axiox from \"axios\";\n\n\nconst serchForm = document.querySelector('.search-form');\nconst galerySerch = document.querySelector('.gallery');\nconst loaderQ = document.querySelector('.loader')\nconst loadMore = document.querySelector('.load-button')\n\n\nlet gallery = new SimpleLightbox('.gallery a');\nlet currentPage =1;\nlet searchValue ='';\n\nconst submitForm = async event => {\n    try {\n        event.preventDefault();\n\n        searchValue = serchForm.elements.searchQuery.value.trim();\n        \n        loaderQ.classList.remove('is-hidden');\n\n        const response =  await fetchImages(searchValue, currentPage);\n        \n        if (response.data.hits.length === 0){\n              iziToast.error ({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n             });\n  \n              galerySerch.innerHTML = '';\n              serchForm.reset();\n              return\n            }\n\n         const imgCard = response.data.hits.map(imgDetails => galleryCard(imgDetails)).join('');\n         galerySerch.innerHTML = imgCard;\n         loadMore.classList.remove('is-hidden');\n         gallery.refresh(); \n    } catch (err) {\n        console.log(err);\n    } finally {\n        loaderQ.classList.add('is-hidden');\n    }\n};\n\nconst onLoadMoreBtn = async event => {\n    currentPage++;\n    try {\n        loaderQ.classList.remove('is-hidden');\n        const response =  await fetchImages(searchValue, currentPage);\n\n        const imgCard = response.data.hits\n        .map(imgDetails => galleryCard(imgDetails))\n        .join('');\n        currentPage =1;\n\n        galerySerch.insertAdjacentHTML('beforeend' ,imgCard);\n        gallery.refresh(); \n\n\n        const galleryEl = document.querySelector('gallery-item__image');\n        const imgHeight = galleryEl.getBoundingClientRect();\n        window.scrollBy({\n            top: 2 * imgHeight,\n            behavior: 'smooth',\n        });\n\n        if (response.data.hits >= totalHits){\n            loadMore.classList.add('is-hidden');\n            iziToast.error ({\n              message: \"We're sorry, but you've reached the end of search results.\",\n              position: 'topRight',\n           });\n            return\n          }\n        \n    } catch(err){\n        console.log(err);\n    } finally{\n        loaderQ.classList.add('is-hidden');\n    }\n\n};\n\n\n    serchForm.addEventListener('submit', submitForm);\n    loadMore.addEventListener('click', onLoadMoreBtn);\n"],"names":["galleryCard","imgEl","axiox","fetchImages","searchValueImput","nextPageNumber","urlParams","serchForm","galerySerch","loaderQ","loadMore","gallery","SimpleLightbox","currentPage","searchValue","submitForm","event","response","iziToast","imgCard","imgDetails","err","onLoadMoreBtn","imgHeight"],"mappings":"owBAAO,MAAMA,EAAcC,GAChB;AAAA,oCACyBA,EAAM,aAAa;AAAA;AAAA,+DAEQA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,6BAIxEA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,6BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,6BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,6BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MClB5CC,EAAM,SAAS,QAAU,2BAGlB,MAAMC,EAAc,CAACC,EAAkBC,IAAmB,CAC7D,MAAMC,EAAY,CACd,OAAO,CACP,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,SAAU,GACV,KAAMC,EACN,WAAY,GACZ,IAAK,oCAAsC,CACnD,EAGA,OAAOH,EAAM,IAAI,GAAGI,CAAS,CAC7B,ECXMC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAW,SAAS,cAAc,cAAc,EAGtD,IAAIC,EAAU,IAAIC,EAAe,YAAY,EACzCC,EAAa,EACbC,EAAa,GAEjB,MAAMC,EAAa,MAAMC,GAAS,CAC9B,GAAI,CACAA,EAAM,eAAc,EAEpBF,EAAcP,EAAU,SAAS,YAAY,MAAM,KAAI,EAEvDE,EAAQ,UAAU,OAAO,WAAW,EAEpC,MAAMQ,EAAY,MAAMd,EAAYW,EAAaD,CAAW,EAE5D,GAAII,EAAS,KAAK,KAAK,SAAW,EAAE,CAC9BC,EAAS,MAAO,CACd,QAAS,2EACT,SAAU,UAC1B,CAAc,EAEAV,EAAY,UAAY,GACxBD,EAAU,MAAK,EACf,MACD,CAEJ,MAAMY,EAAUF,EAAS,KAAK,KAAK,IAAIG,GAAcpB,EAAYoB,CAAU,CAAC,EAAE,KAAK,EAAE,EACrFZ,EAAY,UAAYW,EACxBT,EAAS,UAAU,OAAO,WAAW,EACrCC,EAAQ,QAAO,CACnB,OAAQU,EAAK,CACV,QAAQ,IAAIA,CAAG,CACvB,QAAc,CACNZ,EAAQ,UAAU,IAAI,WAAW,CACpC,CACL,EAEMa,EAAgB,MAAMN,GAAS,CACjCH,IACA,GAAI,CACAJ,EAAQ,UAAU,OAAO,WAAW,EACpC,MAAMQ,EAAY,MAAMd,EAAYW,EAAaD,CAAW,EAEtDM,EAAUF,EAAS,KAAK,KAC7B,IAAIG,GAAcpB,EAAYoB,CAAU,CAAC,EACzC,KAAK,EAAE,EACRP,EAAa,EAEbL,EAAY,mBAAmB,YAAaW,CAAO,EACnDR,EAAQ,QAAO,EAIf,MAAMY,EADY,SAAS,cAAc,qBAAqB,EAClC,wBAM5B,GALA,OAAO,SAAS,CACZ,IAAK,EAAIA,EACT,SAAU,QACtB,CAAS,EAEGN,EAAS,KAAK,MAAQ,UAAU,CAChCP,EAAS,UAAU,IAAI,WAAW,EAClCQ,EAAS,MAAO,CACd,QAAS,6DACT,SAAU,UACxB,CAAY,EACA,MACD,CAEN,OAAOG,EAAI,CACR,QAAQ,IAAIA,CAAG,CACvB,QAAa,CACLZ,EAAQ,UAAU,IAAI,WAAW,CACpC,CAEL,EAGIF,EAAU,iBAAiB,SAAUQ,CAAU,EAC/CL,EAAS,iBAAiB,QAASY,CAAa"}